#!/bin/sh

CONFIG_I18N_PATH="/etc/configurator"
CONFIG_PLUGINS_PATH="/usr/share/configurator"
CONFIG_FILE=/var/configurator

cmdline_default () {
  ret=`sed -n "s/.*$1=\([^ ]*\).*/\1/p" /proc/cmdline`
  test -z $ret && ret=$2
  echo $ret
}

set_config () {
  if grep -q "$1=" $CONFIG_FILE; then
    # entry already exists: overwrite
    sed -i "s%$1=.*%$1=\"$2\"%" $CONFIG_FILE
  else
    echo "$1=\"$2\"" >> $CONFIG_FILE
  fi
}

get_i18n () {
  lang=`cmdline_default lang en`

  . $CONFIG_I18N_PATH/en.config # default language file, always present
  [ -f $CONFIG_I18N_PATH/${lang}.config ] && . $CONFIG_I18N_PATH/${lang}.config
}
