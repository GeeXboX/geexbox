#!/bin/sh

. config/options

$SCRIPTS/build toolchain
$SCRIPTS/build xorg-protocols
$SCRIPTS/build libXau
$SCRIPTS/build libxcb

cd $BUILD/$1*
./configure --host=$TARGET_NAME \
            --build=$HOST_NAME \
            --prefix=$LIB_PREFIX \
            --exec-prefix=/usr \
            --libdir=$LIB_PREFIX/lib \
            --sysconfdir=/etc \
            --localstatedir=/var \
            --datarootdir=/usr/share \
            --datadir=/usr/share \
            --localedir=/usr/share/locale \
            --enable-shared \
            --disable-static \
            --disable-secure-rpc \
            --disable-loadable-i18n \
            --disable-xcms \
            --disable-xlocaledir \
            --disable-xf86bigfont \
            --with-xcb \
            --enable-xthreads \
            --enable-xlocale \
            --enable-xkb \
            --disable-man-pages \
            --disable-specs \
            --disable-composecache \
            --disable-lint-library \
            --disable-ipv6 \
            --without-launchd \
            --without-lint \
            --enable-malloc0returnsnull
make
strip_libs src

make install \
  bindir=$LIB_PREFIX/bin \
  includedir=$LIB_PREFIX/include \
  libdir=$LIB_PREFIX/lib \
  datarootdir=$LIB_PREFIX/share \
  datadir=$LIB_PREFIX/share \
  localedir=$LIB_PREFIX/share/locale \
  x11localedir=$LIB_PREFIX/share/locale \
  X11_LOCALEDATADIR=$LIB_PREFIX/share/locale \
  sysconfdir=$SYSROOT_PREFIX/etc \
  x11datadir=$SYSROOT_PREFIX/share/X11
