#!/bin/sh

. config/options

$SCRIPTS/install libftdi

mkdir -p $INSTALL/etc
mkdir -p $INSTALL/usr/bin
mkdir -p "`ls -d $INSTALL/lib/modules/*`/misc"

cp $BUILD/$1-[0-9]*/daemons/lircd $INSTALL/usr/bin
cp $BUILD/$1-[0-9]*/tools/irpty $INSTALL/usr/bin
if [ $TARGET_ARCH != arm ]; then
cp $BUILD/$1-[0-9]*/drivers/lirc_dev/lirc_dev.ko \
   $BUILD/$1-[0-9]*/drivers/lirc_i2c/lirc_i2c.ko \
   $BUILD/$1-[0-9]*/drivers/lirc_gpio/lirc_gpio.ko \
   $BUILD/$1-[0-9]*/drivers/lirc_serial/lirc_serial.ko \
   $BUILD/$1-[0-9]*/drivers/lirc_sir/lirc_sir.ko \
   $BUILD/$1-[0-9]*/drivers/lirc_atiusb/lirc_atiusb.ko \
   $BUILD/$1-[0-9]*/drivers/lirc_it87/lirc_it87.ko \
   $BUILD/$1-[0-9]*/drivers/lirc_mceusb/lirc_mceusb.ko \
   $BUILD/$1-[0-9]*/drivers/lirc_streamzap/lirc_streamzap.ko \
   $BUILD/$1-[0-9]*/drivers/lirc_imon/lirc_imon.ko \
   $INSTALL/lib/modules/*/misc
fi
[ "$DEVTOOLS" = yes ] && cp $BUILD/$1-[0-9]*/tools/irw $BUILD/$1-[0-9]*/tools/mode2 $BUILD/$1-[0-9]*/daemons/irrecord $BUILD/$1-[0-9]*/tools/irsend $INSTALL/usr/bin

mkdir -p $INSTALL/etc/lirc
cp $PACKAGES/$1/config/lircrc_* $INSTALL/etc/lirc
cp $PACKAGES/$1/config/lircd_*.conf $INSTALL/etc/lirc
cp $PACKAGES/$1/config/lircd_* $INSTALL/etc/lirc

[ $TARGET_ARCH != arm ] && $SCRIPTS/install lirc-nct667x

exit 0
