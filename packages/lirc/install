#!/bin/sh

. config/options

cd $BUILD/$1-[0-9]*

do_install usr/lib/liblirc_client.so*
do_install usr/sbin/lircd

if [ "$DEVTOOLS" = yes ]; then
  do_install usr/bin
else
  do_install usr/bin/irpty
fi

get_meta linux
KVER=$PKG_VERSION

mkdir -p $INSTALL/lib/modules/$KVER/misc
cp drivers/lirc_dev/lirc_dev.ko \
   drivers/lirc_i2c/lirc_i2c.ko \
   drivers/lirc_gpio/lirc_gpio.ko \
   drivers/lirc_serial/lirc_serial.ko \
   drivers/lirc_sir/lirc_sir.ko \
   drivers/lirc_atiusb/lirc_atiusb.ko \
   drivers/lirc_it87/lirc_it87.ko \
   drivers/lirc_mceusb/lirc_mceusb.ko \
   drivers/lirc_streamzap/lirc_streamzap.ko \
   drivers/lirc_imon/lirc_imon.ko \
   $INSTALL/lib/modules/$KVER/misc

mkdir -p $INSTALL/etc/lirc
cp $ROOT/$PACKAGES/$1/config/lircrc_* $INSTALL/etc/lirc
cp $ROOT/$PACKAGES/$1/config/lircd_*.conf $INSTALL/etc/lirc
cp $ROOT/$PACKAGES/$1/config/lircd_* $INSTALL/etc/lirc
