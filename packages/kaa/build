#!/bin/sh

. config/options

$SCRIPTS/build toolchain
$SCRIPTS/build pygame
$SCRIPTS/build imlib2
$SCRIPTS/build GLib
$SCRIPTS/build libxml2

HOST_PYTHON="`ls -d $ROOT/$BUILD/Python*/objdir/buildpython`/python"
PYTHON_DIR=`ls -d $ROOT/$BUILD/Python*`
PYGAME_INC=`ls -d $SYSROOT_PREFIX/usr/local/include/python*/pygame`
export PYTHONPATH="`ls -d $LIB_PREFIX/lib/python*/site-packages`"

export CFLAGS="$CFLAGS -I$PYGAME_INC -I$PYTHON_DIR/Include -I$PYTHON_DIR/objdir -DX_DISPLAY_MISSING -DUSE_IMLIB2"
export LDSHARED="$CC -shared"

cd $BUILD/$1*
$HOST_PYTHON setup.py install --prefix=$LIB_PREFIX
