#!/bin/sh

. config/options

require_glibc $1

NV_ARCH=x86
[ "$TARGET_ARCH" = x86_64 ] && NV_ARCH=x86_64

NV_PKG="`grep $NV_ARCH- $PACKAGES/$1/url | sed 's%.*/\(.*\)$%\1%'`"
[ -d $BUILD/$1 ] && rm -rf $BUILD/$1

sh $SOURCES/$1/$NV_PKG --extract-only --target $BUILD/$1

if [ -d "$PACKAGES/$1/patches.nvidia/" ]; then
  for i in $PACKAGES/$1/patches.nvidia/*.diff*; do
    apply_patch $1 $i
  done
fi
