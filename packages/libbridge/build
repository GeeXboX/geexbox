#!/bin/sh

. config/options

$SCRIPTS/build toolchain

cd $BUILD/$1*

make -C libbridge CC="$TARGET_CC"
make -C libqos CC="$TARGET_CC"

cp -P libbridge/libbridge.so $LIB_PREFIX/lib
cp -P libqos/libqos.so $LIB_PREFIX/lib

mkdir -p $LIB_PREFIX/include/libbridge
cp -PR include/* $LIB_PREFIX/include/libbridge

cat > $LIB_PREFIX/lib/pkgconfig/libbridge.pc << EOF
prefix=$LIB_PREFIX
exec_prefix=$LIB_PREFIX
libdir=$LIB_PREFIX/lib
includedir=$LIB_PREFIX/include

Name: libbridge
Description: Texas Instruments' DSP/BIOS bridge
Version: 23.3.3
Libs: -L${libdir} -lbridge
Cflags: -I${includedir}/dspbridge
EOF
