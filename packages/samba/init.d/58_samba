#!/bin/sh
#
# mount samba shares
#
#
# runlevels: geexbox, debug, configure

if test -x /usr/bin/mount.cifs -a -f /etc/network; then
  echo "### Mounting Samba shares ###"

  . /etc/network

  automount_samba static >/dev/null 2>&1 &
  automount_samba dynamic >/dev/null 2>&1 &

  if [ -n "$NET_RESCAN_DELAY" -a $NET_RESCAN_DELAY -gt 0 ]; then
    echo -e "*/$NET_RESCAN_DELAY * * * *\t/usr/bin/automount_samba dynamic > /dev/null 2>&1" >> /var/spool/cron/crontabs/root
  fi
fi

if test -x /usr/bin/smbd -a "$SAMBA_SERVER" = yes; then
  echo "### Starting Samba server ###"
  /usr/bin/smbd
fi

exit 0
