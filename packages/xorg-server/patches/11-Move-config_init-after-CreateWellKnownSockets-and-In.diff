From 4ae407a5a308febf63de27a62f8c301c73b37d3e Mon Sep 17 00:00:00 2001
From: Julien Cristau <jcristau@debian.org>
Date: Tue, 6 Oct 2009 17:44:33 +0200
Subject: [PATCH 1/5] Move config_init() after CreateWellKnownSockets() and InitCoreDevices()

config_init() can now add devices directly instead of scheduling a
timer.

Signed-off-by: Julien Cristau <jcristau@debian.org>
Tested-by: Peter Hutterer <peter.hutterer@who-t.net>
---
 dix/main.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/dix/main.c b/dix/main.c
index f96245a..2117a1e 100644
--- a/dix/main.c
+++ b/dix/main.c
@@ -168,7 +168,6 @@ int main(int argc, char *argv[], char *envp[])
 	InitBlockAndWakeupHandlers();
 	/* Perform any operating system dependent initializations you'd like */
 	OsInit();
-        config_init();
 	if(serverGeneration == 1)
 	{
 	    CreateWellKnownSockets();
@@ -254,6 +253,7 @@ int main(int argc, char *argv[], char *envp[])
 	    InitRootWindow(WindowTable[i]);
 
         InitCoreDevices();
+        config_init();
 	InitInput(argc, argv);
 	InitAndStartDevices();
 
-- 
1.6.5

