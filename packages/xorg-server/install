#!/bin/sh

. config/options

XORG_SRC="$BUILD/$1*/hw/xfree86"
XORG_DST="$INSTALL/usr/lib/xorg/modules"

mkdir -p $INSTALL/usr/bin
cp $XORG_SRC/Xorg $INSTALL/usr/bin
cp $XORG_SRC/utils/xorgconfig/xorgconfig $INSTALL/usr/bin

mkdir -p $XORG_DST
cp $XORG_SRC/shadowfb/.libs/libshadowfb.so $XORG_DST
cp $XORG_SRC/scanpci/.libs/libscanpci.so $XORG_DST
cp $XORG_SRC/scanpci/.libs/libpcidata.so $XORG_DST
cp $XORG_SRC/dixmods/.libs/libafb.so $XORG_DST
cp $XORG_SRC/dixmods/.libs/libcfb.so $XORG_DST
cp $XORG_SRC/dixmods/.libs/libcfb16.so $XORG_DST
cp $XORG_SRC/dixmods/.libs/libcfb32.so $XORG_DST
cp $XORG_SRC/dixmods/.libs/libfb.so $XORG_DST
cp $XORG_SRC/dixmods/.libs/libmfb.so $XORG_DST
cp $XORG_SRC/dixmods/.libs/libshadow.so $XORG_DST
cp $XORG_SRC/xf4bpp/.libs/libxf4bpp.so $XORG_DST
cp $XORG_SRC/vbe/.libs/libvbe.so $XORG_DST
cp $XORG_SRC/xf1bpp/.libs/libxf1bpp.so $XORG_DST
cp $XORG_SRC/int10/.libs/libint10.so $XORG_DST
cp $XORG_SRC/exa/.libs/libexa.so $XORG_DST
cp $XORG_SRC/ramdac/.libs/libramdac.so $XORG_DST
cp $XORG_SRC/vgahw/.libs/libvgahw.so $XORG_DST
cp $XORG_SRC/rac/.libs/librac.so $XORG_DST
cp $XORG_SRC/ddc/.libs/libddc.so $XORG_DST
cp $XORG_SRC/xaa/.libs/libxaa.so $XORG_DST
cp $XORG_SRC/xf8_32bpp/.libs/libxf8_32bpp.so $XORG_DST
cp $XORG_SRC/xf8_16bpp/.libs/libxf8_16bpp.so $XORG_DST
cp $XORG_SRC/i2c/.libs/libi2c.so $XORG_DST

mkdir -p $XORG_DST/extensions
cp $XORG_SRC/dixmods/.libs/libdbe.so $XORG_DST/extensions
cp $XORG_SRC/dixmods/extmod/.libs/libextmod.so $XORG_DST/extensions
cp $XORG_SRC/dixmods/.libs/librecord.so $XORG_DST/extensions

mkdir -p $XORG_DST/fonts
cp $XORG_SRC/dixmods/.libs/libbitmap.so $XORG_DST/fonts
cp $XORG_SRC/dixmods/.libs/libfreetype.so $XORG_DST/fonts
cp $XORG_SRC/dixmods/.libs/libtype1.so $XORG_DST/fonts

mkdir -p $XORG_DST/linux
cp $XORG_SRC/fbdevhw/.libs/libfbdevhw.so $XORG_DST/linux

mkdir -p $XORG_DST/multimedia
cp $XORG_SRC/i2c/.libs/*_drv.so $XORG_DST/multimedia
