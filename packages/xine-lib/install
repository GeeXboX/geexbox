#!/bin/sh

. config/options

cd $BUILD/$1*

do_install usr/lib/libxine.so*
do_install usr/lib/xine/plugins/2.0/xineplug_decode_mad.so
do_install usr/lib/xine/plugins/2.0/xineplug_ao_out_alsa.so
do_install usr/lib/xine/plugins/2.0/xineplug_ao_out_none.so
do_install usr/lib/xine/plugins/2.0/xineplug_dmx_mpeg*.so
do_install usr/lib/xine/plugins/2.0/xineplug_inp_dvd.so

[ "$DEVTOOLS" = yes ] && \
  do_install usr/lib/xine/plugins/2.0/xineplug_inp_file.so

do_install usr/lib/xine/plugins/2.0/xineplug_decode_ff.so
do_install usr/lib/xine/plugins/2.0/xineplug_decode_spu*.so
do_install usr/lib/xine/plugins/2.0/xineplug_decode_mpeg2.so

do_install usr/lib/xine/plugins/2.0/xineplug_vo_out_none.so

[ "$CONSOLE" = yes ] && \
  do_install usr/lib/xine/plugins/2.0/xineplug_vo_out_fb.so
if pkg_uses $1 xorg; then
  do_install usr/lib/xine/plugins/2.0/xineplug_vo_out_x*.so
  do_install usr/lib/xine/plugins/2.0/xineplug_vo_out_opengl.so
fi
pkg_uses $1 vdr && do_install usr/lib/xine/plugins/2.0/xineplug_vdr.so

do_install usr/lib/xine/plugins/2.0/post/xineplug_post_audio_filters.so
do_install usr/lib/xine/plugins/2.0/post/xineplug_post_tvtime.so
do_install usr/lib/xine/plugins/2.0/post/xineplug_post_planar.so

mkdir -p $INSTALL/etc/xine
cp $ROOT/$PACKAGES/$1/config/config $INSTALL/etc/xine
pkg_uses $1 vdpau && \
  echo "engine.buffers.video_num_frames: 22" >> $INSTALL/etc/xine/config

exit 0
