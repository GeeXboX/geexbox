#!/bin/sh

. config/options

$SCRIPTS/build toolchain
$SCRIPTS/build openssl
$SCRIPTS/build curl
$SCRIPTS/build eina
$SCRIPTS/build eet
$SCRIPTS/build evas

if [ "$XORG" = yes ]; then
  $SCRIPTS/build xorg-libs
  WITH_X="--with-x \
          --enable-ecore-evas-software-x11 \
          --enable-ecore-evas-software-16-x11 \
          --enable-ecore-evas-xrender-x11 \
          --enable-ecore-evas-opengl-x11"
else
  WITH_X="--disable-ecore-x"
fi

cd $BUILD/$1*
./configure --host=$TARGET_NAME \
            --build=$HOST_NAME \
            --prefix=$LIB_PREFIX \
            --disable-static \
            --enable-shared \
            --disable-doc \
            --enable-curl \
            --enable-openssl \
            --enable-poll \
            --enable-inotify \
            --enable-ecore-job \
            --enable-ecore-fb \
            --enable-ecore-evas-fb \
            --disable-ecore-x-xcb \
            --disable-ecore-evas-xrender-xcb \
            --disable-ecore-evas-software-gdi \
            --disable-ecore-evas-software-ddraw \
            --disable-ecore-evas-direct3d \
            --disable-ecore-evas-opengl-glew \
            --disable-ecore-evas-software-16-ddraw \
            --disable-ecore-evas-quartz \
            --disable-ecore-evas-software-sdl \
            --disable-ecore-evas-directfb \
            --disable-ecore-evas-software-16-wince \
            --enable-ecore-evas \
            --enable-ecore-evas-software-buffer \
            --with-iconv-link="-liconv" \
            $WITH_X \

make
strip_libs src
make install
