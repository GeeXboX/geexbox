#!/bin/sh

if [ -f /var/view_img_timeout ]; then
  VIEW_IMG_TIMEOUT=`cat /var/view_img_timeout`
else
  VIEW_IMG_TIMEOUT=`cat /etc/view_img_timeout`
fi

if [ -e /var/use_xorg -a -x /usr/bin/feh ]; then
  DISPLAY=:0.0 feh -q --no-menus --borderless --full-screen --auto-zoom --hide-pointer --slideshow-delay $VIEW_IMG_TIMEOUT --filelist /tmp/view_img_files
elif [ ! -e /var/use_xorg -a -x /usr/bin/fbi ]; then
  if [ $VIEW_IMG_TIMEOUT -eq 0 ]; then
    VIEW_IMG_TIMEOUT=""
  else
    VIEW_IMG_TIMEOUT="--timeout $VIEW_IMG_TIMEOUT"
  fi
  fbi -a -q $VIEW_IMG_TIMEOUT --once --list /tmp/view_img_files >/dev/null
fi
