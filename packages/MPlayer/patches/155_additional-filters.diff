* Allow us to select a subset of filter that are useful for our purposes, by
  disabling all others unless we manually select them with 
  --enable-additional-filters configure flag.
diff -r 9fdb997b3020 configure
--- a/configure	Sun Apr 30 16:54:28 2006 +0200
+++ b/configure	Sun Apr 30 16:54:29 2006 +0200
@@ -664,6 +664,7 @@ _inet6=auto
 _inet6=auto
 _gethostbyname2=auto
 _ftp=yes
+_additional_filters=yes
 _musepack=auto
 _vstream=auto
 _pthreads=auto
@@ -1162,6 +1162,8 @@ for ac_option do
   --disable-sighandler) _sighandler=no   ;;
   --enable-win32dll) _win32dll=yes ;;
   --disable-win32dll) _win32dll=no ;;
+  --enable-additional-filters) _additional_filters=yes ;;
+  --disable-additional-filters) _additional_filters=no ;;
 
   --enable-sse)	_sse=yes ;;
   --disable-sse) _sse=no ;;
@@ -7217,6 +7217,11 @@ fi
 fi
 echores "$_gethostbyname2"
 
+if test "$_additional_filters" = yes ; then
+  _def_additional_filters='#define USE_ADDITIONAL_FILTERS 1'
+else
+  _def_additional_filters='#undef USE_ADDITIONAL_FILTERS'
+fi
 
 # --------------- GUI specific tests begin -------------------
 echocheck "GUI"
@@ -7723,6 +7723,8 @@ CONFIG_LIBAVFORMAT_SO = $_libavformat_so
 LIBPOSTPROC_A = $_libpostproc_a
 LIBPOSTPROC_SO = $_libpostproc_so

+ADDITIONAL_FILTERS = $_additional_filters
+
 BUILD_STATIC=yes
 SRC_PATH=..
 BUILD_ROOT=..
@@ -8112,6 +8112,9 @@ int setenv(const char *name, const char 
 $_def_win32dll
 #define WIN32_PATH "$_win32codecsdir"
 
+/* Additionnal filters support */
+$_def_additional_filters
+
 /* Mac OS X specific features */
 $_def_macosx_finder_support
 $_def_macosx_bundle
diff -r 9fdb997b3020 Makefile
--- a/Makefile	Sun Apr 30 16:54:28 2006 +0200
+++ b/Makefile	Sun Apr 30 16:54:29 2006 +0200
@@ -79,7 +79,6 @@
               libmpcodecs/native/nuppelvideo.c \
               libmpcodecs/native/rtjpegn.c \
               libmpcodecs/native/xa_gsm.c \
-              libmpcodecs/pullup.c \
               libmpcodecs/vd.c \
               libmpcodecs/vd_hmblck.c \
               libmpcodecs/vd_lzo.c \
@@ -90,69 +89,11 @@
               libmpcodecs/vd_raw.c \
               libmpcodecs/vd_sgi.c \
               libmpcodecs/vf.c \
-              libmpcodecs/vf_1bpp.c \
-              libmpcodecs/vf_2xsai.c \
-              libmpcodecs/vf_blackframe.c \
-              libmpcodecs/vf_boxblur.c \
               libmpcodecs/vf_crop.c \
-              libmpcodecs/vf_cropdetect.c \
-              libmpcodecs/vf_decimate.c \
-              libmpcodecs/vf_delogo.c \
-              libmpcodecs/vf_denoise3d.c \
-              libmpcodecs/vf_detc.c \
-              libmpcodecs/vf_dint.c \
-              libmpcodecs/vf_divtc.c \
-              libmpcodecs/vf_down3dright.c \
-              libmpcodecs/vf_dsize.c \
-              libmpcodecs/vf_dvbscale.c \
-              libmpcodecs/vf_eq.c \
-              libmpcodecs/vf_eq2.c \
               libmpcodecs/vf_expand.c \
-              libmpcodecs/vf_field.c \
-              libmpcodecs/vf_fil.c \
-              libmpcodecs/vf_filmdint.c \
-              libmpcodecs/vf_flip.c \
               libmpcodecs/vf_format.c \
-              libmpcodecs/vf_framestep.c \
-              libmpcodecs/vf_halfpack.c \
-              libmpcodecs/vf_harddup.c \
-              libmpcodecs/vf_hqdn3d.c \
-              libmpcodecs/vf_hue.c \
-              libmpcodecs/vf_il.c \
-              libmpcodecs/vf_ilpack.c \
-              libmpcodecs/vf_ivtc.c \
-              libmpcodecs/vf_kerndeint.c \
-              libmpcodecs/vf_mirror.c \
-              libmpcodecs/vf_noformat.c \
-              libmpcodecs/vf_noise.c \
-              libmpcodecs/vf_ow.c \
-              libmpcodecs/vf_palette.c \
-              libmpcodecs/vf_perspective.c \
-              libmpcodecs/vf_phase.c \
-              libmpcodecs/vf_pp7.c \
-              libmpcodecs/vf_pullup.c \
-              libmpcodecs/vf_rectangle.c \
-              libmpcodecs/vf_remove_logo.c \
-              libmpcodecs/vf_rgb2bgr.c \
-              libmpcodecs/vf_rgbtest.c \
-              libmpcodecs/vf_rotate.c \
-              libmpcodecs/vf_sab.c \
               libmpcodecs/vf_scale.c \
-              libmpcodecs/vf_smartblur.c \
-              libmpcodecs/vf_softpulldown.c \
-              libmpcodecs/vf_softskip.c \
-              libmpcodecs/vf_swapuv.c \
-              libmpcodecs/vf_telecine.c \
-              libmpcodecs/vf_test.c \
-              libmpcodecs/vf_tfields.c \
-              libmpcodecs/vf_tile.c \
-              libmpcodecs/vf_tinterlace.c \
-              libmpcodecs/vf_unsharp.c \
               libmpcodecs/vf_vo.c \
-              libmpcodecs/vf_yadif.c \
-              libmpcodecs/vf_yuvcsp.c \
-              libmpcodecs/vf_yuy2.c \
-              libmpcodecs/vf_yvu9.c \
               libmpdemux/aac_hdr.c \
               libmpdemux/asfheader.c \
               libmpdemux/aviheader.c \
@@ -210,6 +151,69 @@
               stream/stream_null.c \
               stream/url.c \
 
+ifeq ($(ADDITIONAL_FILTERS),yes)
+SRCS_COMMON +=libmpcodecs/pullup.c \
+              libmpcodecs/vf_1bpp.c \
+              libmpcodecs/vf_2xsai.c \
+              libmpcodecs/vf_blackframe.c \
+              libmpcodecs/vf_boxblur.c \
+              libmpcodecs/vf_cropdetect.c \
+              libmpcodecs/vf_decimate.c \
+              libmpcodecs/vf_delogo.c \
+              libmpcodecs/vf_denoise3d.c \
+              libmpcodecs/vf_detc.c \
+              libmpcodecs/vf_dint.c \
+              libmpcodecs/vf_divtc.c \
+              libmpcodecs/vf_down3dright.c \
+              libmpcodecs/vf_dsize.c \
+              libmpcodecs/vf_dvbscale.c \
+              libmpcodecs/vf_eq.c \
+              libmpcodecs/vf_eq2.c \
+              libmpcodecs/vf_field.c \
+              libmpcodecs/vf_fil.c \
+              libmpcodecs/vf_filmdint.c \
+              libmpcodecs/vf_flip.c \
+              libmpcodecs/vf_framestep.c \
+              libmpcodecs/vf_halfpack.c \
+              libmpcodecs/vf_harddup.c \
+              libmpcodecs/vf_hqdn3d.c \
+              libmpcodecs/vf_hue.c \
+              libmpcodecs/vf_il.c \
+              libmpcodecs/vf_ilpack.c \
+              libmpcodecs/vf_ivtc.c \
+              libmpcodecs/vf_kerndeint.c \
+              libmpcodecs/vf_mirror.c \
+              libmpcodecs/vf_noformat.c \
+              libmpcodecs/vf_noise.c \
+              libmpcodecs/vf_ow.c \
+              libmpcodecs/vf_palette.c \
+              libmpcodecs/vf_perspective.c \
+              libmpcodecs/vf_phase.c \
+              libmpcodecs/vf_pp7.c \
+              libmpcodecs/vf_pullup.c \
+              libmpcodecs/vf_rectangle.c \
+              libmpcodecs/vf_remove_logo.c \
+              libmpcodecs/vf_rgb2bgr.c \
+              libmpcodecs/vf_rgbtest.c \
+              libmpcodecs/vf_rotate.c \
+              libmpcodecs/vf_sab.c \
+              libmpcodecs/vf_smartblur.c \
+              libmpcodecs/vf_softpulldown.c \
+              libmpcodecs/vf_softskip.c \
+              libmpcodecs/vf_swapuv.c \
+              libmpcodecs/vf_telecine.c \
+              libmpcodecs/vf_test.c \
+              libmpcodecs/vf_tfields.c \
+              libmpcodecs/vf_tile.c \
+              libmpcodecs/vf_tinterlace.c \
+              libmpcodecs/vf_unsharp.c \
+              libmpcodecs/vf_yadif.c \
+              libmpcodecs/vf_yuvcsp.c \
+              libmpcodecs/vf_yuy2.c \
+              libmpcodecs/vf_yvu9.c \
+
+endif
+
 SRCS_COMMON-$(AUDIO_INPUT)-$(ALSA1X) += stream/ai_alsa1x.c
 SRCS_COMMON-$(AUDIO_INPUT)-$(ALSA9)  += stream/ai_alsa.c
 SRCS_COMMON-$(AUDIO_INPUT)-$(OSS)    += stream/ai_oss.c
diff -r 9fdb997b3020 libmpcodecs/vf.c
--- a/libmpcodecs/vf.c	2008-01-12 20:57:29.000000000 +0100
+++ b/libmpcodecs/vf.c	2008-01-12 20:59:27.000000000 +0100
@@ -24,13 +24,25 @@
 #include "libvo/fastmemcpy.h"
 
 extern const vf_info_t vf_info_vo;
-extern const vf_info_t vf_info_rectangle;
 extern const vf_info_t vf_info_bmovl;
 extern const vf_info_t vf_info_crop;
 extern const vf_info_t vf_info_expand;
 extern const vf_info_t vf_info_pp;
 extern const vf_info_t vf_info_scale;
 extern const vf_info_t vf_info_format;
+extern const vf_info_t vf_info_lavc;
+extern const vf_info_t vf_info_zrmjpeg;
+extern const vf_info_t vf_info_lavcdeint;
+extern const vf_info_t vf_info_spp;
+extern const vf_info_t vf_info_uspp;
+extern const vf_info_t vf_info_fspp;
+extern const vf_info_t vf_info_qp;
+extern const vf_info_t vf_info_screenshot;
+extern const vf_info_t vf_info_ass;
+extern const vf_info_t vf_info_mcdeint;
+extern const vf_info_t vf_info_geq;
+#ifdef USE_ADDITIONAL_FILTERS
+extern const vf_info_t vf_info_rectangle;
 extern const vf_info_t vf_info_noformat;
 extern const vf_info_t vf_info_yuy2;
 extern const vf_info_t vf_info_flip;
@@ -38,14 +50,12 @@
 extern const vf_info_t vf_info_rotate;
 extern const vf_info_t vf_info_mirror;
 extern const vf_info_t vf_info_palette;
-extern const vf_info_t vf_info_lavc;
-extern const vf_info_t vf_info_zrmjpeg;
+extern const vf_info_t vf_info_pp7;
 extern const vf_info_t vf_info_dvbscale;
 extern const vf_info_t vf_info_cropdetect;
 extern const vf_info_t vf_info_test;
 extern const vf_info_t vf_info_noise;
 extern const vf_info_t vf_info_yvu9;
-extern const vf_info_t vf_info_lavcdeint;
 extern const vf_info_t vf_info_eq;
 extern const vf_info_t vf_info_eq2;
 extern const vf_info_t vf_info_halfpack;
@@ -80,29 +90,20 @@
 extern const vf_info_t vf_info_delogo;
 extern const vf_info_t vf_info_remove_logo;
 extern const vf_info_t vf_info_hue;
-extern const vf_info_t vf_info_spp;
-extern const vf_info_t vf_info_uspp;
-extern const vf_info_t vf_info_fspp;
-extern const vf_info_t vf_info_pp7;
 extern const vf_info_t vf_info_yuvcsp;
 extern const vf_info_t vf_info_kerndeint;
 extern const vf_info_t vf_info_rgbtest;
-extern const vf_info_t vf_info_qp;
 extern const vf_info_t vf_info_phase;
 extern const vf_info_t vf_info_divtc;
 extern const vf_info_t vf_info_harddup;
 extern const vf_info_t vf_info_softskip;
-extern const vf_info_t vf_info_screenshot;
-extern const vf_info_t vf_info_ass;
-extern const vf_info_t vf_info_mcdeint;
 extern const vf_info_t vf_info_yadif;
 extern const vf_info_t vf_info_blackframe;
-extern const vf_info_t vf_info_geq;
 extern const vf_info_t vf_info_ow;
+#endif
 
 // list of available filters:
 static const vf_info_t* const filter_list[]={
-    &vf_info_rectangle,
 #ifdef HAVE_POSIX_SELECT
     &vf_info_bmovl,
 #endif
@@ -115,6 +116,27 @@
 //    &vf_info_osd,
     &vf_info_vo,
     &vf_info_format,
+#ifdef USE_LIBAVCODEC
+    &vf_info_lavc,
+    &vf_info_lavcdeint,
+    &vf_info_screenshot,
+#endif
+#ifdef HAVE_ZR
+    &vf_info_zrmjpeg,
+#endif
+#ifdef USE_LIBAVCODEC_A
+    &vf_info_spp,
+    &vf_info_uspp,
+    &vf_info_fspp,
+    &vf_info_qp,
+    &vf_info_mcdeint,
+    &vf_info_geq,
+#endif
+#ifdef USE_ASS
+    &vf_info_ass,
+#endif
+#ifdef USE_ADDITIONAL_FILTERS
+    &vf_info_rectangle,
     &vf_info_noformat,
     &vf_info_yuy2,
     &vf_info_flip,
@@ -123,14 +145,6 @@
     &vf_info_mirror,
     &vf_info_palette,
     &vf_info_pp7,
-#ifdef USE_LIBAVCODEC
-    &vf_info_lavc,
-    &vf_info_lavcdeint,
-    &vf_info_screenshot,
-#endif
-#ifdef HAVE_ZR
-    &vf_info_zrmjpeg,
-#endif
     &vf_info_dvbscale,
     &vf_info_cropdetect,
     &vf_info_test,
@@ -169,14 +186,6 @@
     &vf_info_delogo,
     &vf_info_remove_logo,
     &vf_info_hue,
-#ifdef USE_LIBAVCODEC_A
-    &vf_info_spp,
-    &vf_info_uspp,
-    &vf_info_fspp,
-    &vf_info_qp,
-    &vf_info_mcdeint,
-    &vf_info_geq,
-#endif
     &vf_info_yuvcsp,
     &vf_info_kerndeint,
     &vf_info_rgbtest,
@@ -184,12 +193,10 @@
     &vf_info_divtc,
     &vf_info_harddup,
     &vf_info_softskip,
-#ifdef USE_ASS
-    &vf_info_ass,
-#endif
     &vf_info_yadif,
     &vf_info_blackframe,
     &vf_info_ow,
+#endif /* USE_ADDITIONAL_FILTERS */
     NULL
 };
 
