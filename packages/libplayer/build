#!/bin/sh

. config/options

$SCRIPTS/build toolchain
$SCRIPTS/build xine-lib
$SCRIPTS/build libxcb

if [ "$DEBUG" = yes ]; then
  DEBUG_CONFIG="--enable-debug"
else
  DEBUG_CONFIG="--disable-debug"
fi

if [ "$XORG" = yes ]; then
  XORG_CONFIG="--enable-x11 --enable-xlib-hack"
else
  XORG_CONFIG="--disable-x11"
fi

cd $BUILD/$1*
./configure --prefix=$LIB_PREFIX \
            --enable-static \
            --disable-shared \
            --enable-mplayer \
            --enable-xine \
            --disable-vlc \
            --disable-gstreamer \
            --disable-binding-python \
            --disable-optimize \
            --cross-compile \
            --disable-doc \
            --disable-logcolor \
            $DEBUG_CONFIG \
            $XORG_CONFIG

make -C src
[ "$DEVTOOLS" = yes ] && make apps
make -C src install
cp -f libplayer.pc $LIB_PREFIX/lib/pkgconfig/
