#!/bin/sh

. config/options

$SCRIPTS/install expat

mkdir -p $INSTALL/usr/lib
cp -P $BUILD/$1*/src/mesa/libmesa.so* $INSTALL/usr/lib
cp -P $BUILD/$1*/src/mesa/libmesagallium.so* $INSTALL/usr/lib
cp -P $BUILD/$1*/src/mesa/libglapi.so $INSTALL/usr/lib
cp -P $BUILD/$1*/lib/libOSMesa.so* $INSTALL/usr/lib
cp -P $BUILD/$1*/lib/libGLU.so* $INSTALL/usr/lib
ln -s /usr/lib/mesa/libGL.so.1 $INSTALL/usr/lib
ln -s libGL.so.1 $INSTALL/usr/lib/libGL.so

mkdir -p $INSTALL/usr/lib/mesa
cp -P $BUILD/$1*/lib/libGL.s* $INSTALL/usr/lib/mesa

mkdir -p $INSTALL/usr/lib/dri
if [ "$TARGET_PLATFORM" = easygate ]; then
  cp $BUILD/$1*/lib*/i915_dri.so $INSTALL/usr/lib/dri
else
  cp -P $BUILD/$1*/lib*/*_dri.so $INSTALL/usr/lib/dri
fi

[ "$DEVTOOLS" = yes ] && $SCRIPTS/install mesa-demos

exit 0
