#!/bin/sh

. config/options

require_cxx $1

$SCRIPTS/install SDL
$SCRIPTS/install SDL_image
$SCRIPTS/install SDL_mixer
$SCRIPTS/install SDL_ttf
$SCRIPTS/install SDL_gfx
$SCRIPTS/install SDL_net
$SCRIPTS/install libxml2

mkdir -p $INSTALL/usr/bin
cp $BUILD/$1*/src/wormux $INSTALL/usr/bin

mkdir -p $INSTALL/usr/share/applications
cp $PACKAGES/$1*/config/$1.desktop $INSTALL/usr/share/applications

for loc in $INCLUDED_LOCALES; do
  LOCALE=`echo $loc|cut -f1 -d.`
  if [ -d $BUILD/$1*/locale/$LOCALE ]; then
    mkdir -p $INSTALL/usr/share/locale/$LOCALE
    cp $BUILD/$1*/po/$LOCALE.gmo \
      $INSTALL/usr/share/locale/$LOCALE/LC_MESSAGES/$1.gmo
  fi
done

mkdir -p $INSTALL/usr/share/$1
cp -PR $BUILD/$1*/data/* $INSTALL/usr/share/$1
