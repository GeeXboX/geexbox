#!/bin/sh

. config/options

require_cxx $1

$SCRIPTS/build toolchain
$SCRIPTS/build SDL
$SCRIPTS/build SDL_image
$SCRIPTS/build SDL_mixer
$SCRIPTS/build SDL_ttf
$SCRIPTS/build SDL_gfx
$SCRIPTS/build SDL_net
$SCRIPTS/build curl
$SCRIPTS/build libxml2

export ac_cv_prog_cxx_present=yes

if [ "$DEBUG" = yes ]; then
  DEBUG_CONFIG="--enable-debug --enable-logging --enable-profile"
else
  DEBUG_CONFIG="--disable-debug --disable-logging --disable-profile"
fi

cd $BUILD/$1*
./configure --host=$TARGET_NAME \
            --build=$HOST_NAME \
            --prefix=$LIB_PREFIX \
            --disable-dependency-tracking \
            --with-datadir-name=/usr/share/wormux \
            --with-localedir-name=/usr/share/locale \
            $DEBUG_CONFIG
make
