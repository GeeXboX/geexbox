#!/bin/sh

. config/options

SVN_RELEASE="-ver-pre-svn-05"
[ $TARGET_LIBC = uClibc ] && ELIBC=uclibc || ELIBC=gnu${TARGET_ABI}

$SCRIPTS/install eet
$SCRIPTS/install tiff
[ $TARGET_ARCH = arm ] && $SCRIPTS/install sgx-OpenGLES

mkdir -p $INSTALL/usr/lib
cp -PR $BUILD/$1*/src/lib/.libs/libevas*.so* $INSTALL/usr/lib

for i in png jpeg tiff eet; do
  mkdir -p $INSTALL/usr/lib/evas/modules/savers/$i/linux-${ELIBC}-${TARGET_FAMILY}${SVN_RELEASE}
  cp -PR $BUILD/$1*/src/modules/savers/$i/.libs/module.so \
         $INSTALL/usr/lib/evas/modules/savers/$i/linux-${ELIBC}-${TARGET_FAMILY}${SVN_RELEASE}
done

ENGINES="software_generic fb buffer"
[ "$XORG" = yes ] && ENGINES="$ENGINES software_x11 software_16_x11 xrender_x11 gl_x11"
for i in $ENGINES; do
  mkdir -p $INSTALL/usr/lib/evas/modules/engines/$i/linux-${ELIBC}-${TARGET_FAMILY}${SVN_RELEASE}
  cp -PR $BUILD/$1*/src/modules/engines/$i/.libs/module.so \
         $INSTALL/usr/lib/evas/modules/engines/$i/linux-${ELIBC}-${TARGET_FAMILY}${SVN_RELEASE}
done

for i in pmaps png xpm gif jpeg tiff eet; do
  mkdir -p $INSTALL/usr/lib/evas/modules/loaders/$i/linux-${ELIBC}-${TARGET_FAMILY}${SVN_RELEASE}
  cp -PR $BUILD/$1*/src/modules/loaders/$i/.libs/module.so \
         $INSTALL/usr/lib/evas/modules/loaders/$i/linux-${ELIBC}-${TARGET_FAMILY}${SVN_RELEASE}
done
