#!/bin/sh

. config/options

$SCRIPTS/build toolchain
$SCRIPTS/build eina
$SCRIPTS/build eet
$SCRIPTS/build libpng
$SCRIPTS/build jpeg
$SCRIPTS/build tiff
$SCRIPTS/build libungif
$SCRIPTS/build libiconv

if [ "$XORG" = yes ]; then
  $SCRIPTS/build xorg-libs
  WITH_X="--with-x --enable-software-xlib --enable-software-16-x11 --enable-xrender-x11 --enable-gl-x11"
  EXTRA_LIBS="-lstdc++"
fi

cd $BUILD/$1*
export LIBS="-liconv $EXTRA_LIBS"
./configure --host=$TARGET_NAME \
            --build=$HOST_NAME \
            --prefix=$LIB_PREFIX \
            --disable-static \
            --enable-shared \
            --enable-pthreads \
            --disable-doc \
            --enable-image-loader-eet \
            --enable-image-loader-gif \
            --enable-image-loader-jpeg \
            --enable-image-loader-png \
            --enable-image-loader-tiff \
            --enable-image-loader-pmaps \
            --enable-image-loader-xpm \
            --enable-font-loader-eet \
            --disable-software-xcb \
            --disable-xrender-xcb \
            --enable-fb \
            $WITH_X \

make
strip_libs src
make install
