#!/bin/sh

. config/options

$SCRIPTS/build toolchain
$SCRIPTS/build freetype
$SCRIPTS/build evas
$SCRIPTS/build ecore
$SCRIPTS/build embryo
$SCRIPTS/build edje
$SCRIPTS/build elementary
$SCRIPTS/build curl
$SCRIPTS/build libxml2
$SCRIPTS/build libplayer
$SCRIPTS/build libvalhalla
$SCRIPTS/build libxrandr
$SCRIPTS/build libcddb
$SCRIPTS/build lirc
$SCRIPTS/build gettext
$SCRIPTS/build gupnp-av

if [ "$GAMES" = yes -o "$EMULATORS" = yes ]; then
  GAMES_OPT="--enable-activity-games"
else
  GAMES_OPT="--disable-activity-games"
fi

if [ "$VDR" = yes ]; then
  $SCRIPTS/build libsvdrp
  VDR_OPT="--enable-activity-tv --enable-libsvdrp"
else
  VDR_OPT="--disable-activity-tv --disable-libsvdrp"
fi

cd $BUILD/$1*
LIBS="-lintl" \
./configure --host=$TARGET_NAME \
            --build=$HOST_NAME \
            --prefix=$LIB_PREFIX \
            --exec-prefix=/usr \
            --sysconfdir=/etc \
            --datadir=/usr/share \
            --disable-static \
            --enable-shared \
            --enable-static-modules \
            --disable-theme \
            --enable-shave \
            --enable-browser-upnp \
            $GAMES_OPT \
            $VDR_OPT
make
