#!/bin/sh

. config/options

[ "$TARGET_LIBC" = "uclibc" ] && EXTRA_LIBS="$EXTRA_LIBS -lintl"

if pkg_uses $1 games; then
  GAMES_OPT="--enable-activity-games"
else
  GAMES_OPT="--disable-activity-games"
fi

if pkg_uses $1 vdr; then
  VDR_OPT="--enable-activity-tv --enable-libsvdrp"
else
  VDR_OPT="--disable-activity-tv --disable-libsvdrp"
fi

cd $BUILD/$1*
LIBS="$EXTRA_LIBS" \
do_configure \
            --enable-static-modules \
            --disable-theme \
            --enable-browser-upnp \
            $GAMES_OPT \
            $VDR_OPT
make
make_install
