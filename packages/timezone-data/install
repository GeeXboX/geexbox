#!/bin/sh

. config/options

require_glibc $1

if [ "$INCLUDED_TIMEZONES" = all ]; then
  mkdir -p $INSTALL/usr/share/zoneinfo
  cp -r $SYSROOT_PREFIX/usr/share/zoneinfo/* $INSTALL/usr/share/zoneinfo
elif [ -n "$INCLUDED_TIMEZONES" ]; then
  for tz in $INCLUDED_TIMEZONES; do
    TZDIR=`dirname $INSTALL/usr/share/zoneinfo/$tz`
    mkdir -p $TZDIR
    cp -r $SYSROOT_PREFIX/usr/share/zoneinfo/$tz $TZDIR
  done
fi

if [ -f $INSTALL/usr/share/zoneinfo/$TIMEZONE ]; then
  mkdir -p $INSTALL/etc
  ln -s /usr/share/zoneinfo/$TIMEZONE $INSTALL/etc/localtime
fi

exit 0
