#!/bin/sh

. config/path

[ -f config/options ] || cat > config/options <<EOF
AUTOUPDATE=ask

# Need to point to your actual cc
# If you have ccache installed, take care that LOCAL_CC don't point to it
LOCAL_CC=`which gcc`

# Need to point to your actual g++
# If you have ccache installed, take care that LOCAL_CXX don't point to it
LOCAL_CXX=`which g++`

. config/path
EOF

$SCRIPTS/unpack bst-kconfig

KCONFIG_ROOT=`ls -d $BUILD/bst-kconfig-*`

cat > $KCONFIG_ROOT/Kconfig.generated <<EOF
# GeeXboX version string
config KERNELVERSION
  string
  default "$GEEXBOX_VERSION"

# GeeXboX default configuration
config DEFCONFIG_LIST
  string
  option defconfig_list
  default "$ROOT/config/geexbox_defconfig"
EOF

$SCRIPTS/meta2kconfig $KCONFIG_ROOT/Kconfig.packages

touch $STAMPS_NOARCH/kconfiginit
